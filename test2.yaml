::let:
  x: foo
  y: bar
  $x: qux
  $y: quuz

  template:
    - ::ref: x
    - ::ref: y
    - ::ref: $x
    - ::ref: $y
    - ::ref: $z

formatted:
  ::format: hello {x} woohoo {y} yeah {$x} and {$y}

cool:
  ::format:
    '{x}': "{y}"
    woohoo: "{$x}/{$y}"

list:
  - ::ref: x
  - ::ref: y
  - ::ref: $x
  - ::ref: $y

x:
  - ::ref: $z
    ::else: fuck it

applied:
  ::let:
    x: keyfoo
    y: keybar
    $x: keyqux
    $y: keyquuz
    $z: zeeee
  ::call template:
    $y: callquuz
